name: 'Docker Container Action with Existing Image'
description: 'A GitHub Action that uses an existing Docker image and installs Python dependencies'

inputs:
  python_dependencies:
    description: 'Python dependencies to install'
    required: true
outputs:
  python_dependencies_installed:
    description: 'Indicates whether Python dependencies were successfully installed'
runs:
  using: 'docker'
  image: 'docker://docker:stable-dind'
  entrypoint: '/bin/bash'
  args:
    - '-c'
    - |
      # Start Docker daemon
      dockerd > /dev/null 2>&1 &
      sleep 5

      # Make the script executable
      chmod +x $GITHUB_WORKSPACE/python/entrypoint.sh

      # List files to debug if the script is present
      ls -la $GITHUB_WORKSPACE/python

     # Run the script directly
      /workspace/python/entrypoint.sh "${{ inputs.python_dependencies }}"
